% Capítulo 3 - Referencial ou embasamento teórico
% Revisão da literatura
% texto no qual se deve apresentar os aspectos teóricos, isto é, os conceitos utilizados e a definição dos mesmos; nesta parte faz-se a revisão de literatura sobre o assunto, resumindo-se os resultados de estudos feitos por outros autores, cujas obras citadas e consultadas devem constar nas referências;

\simb[\% (fronteira de enunciado para ToBI)]
\abrv[INTSINT -- \emph{International Transcription System for Intonation}]
\abrv[HMM -- \emph{Hidden Markov Model}]
\abrv[SSML -- \emph{Speech Synthesis Markup Language}]
\abrv[XML -- \emph{eXtensible Markup Language}]
\abrv[W3C -- \emph{World Wide Web Consortium}]

\chapter{Revisão da literatura}

% Intonational phrase: sintagmas entoacionais
% Tone boundary: fronteira prosódica?
% Pitch accent: acento de pitch

% https://www.ime.usp.br/~cpaz/downloads/algorithm-portuguese.pdf

\subsection{Abordagens}
\subsubsection{Klaat}
Síntese por formantes. \cite{espeakng} usa uma mistura do algoritmo de Klatt com
sons de consoantes pré-gravados.
\subsubsection{\emph{Unit selection} e dífonos}
Abordagem utilizada pelo programa MBROLA. Consiste em gravar fala, separar
pedaços de dois em dois.

\subsubsection{HTS}
% http://hts.sp.nitech.ac.jp/
Algumas vozes para o MaryTTS \cite{marytts} utilizam HMMs, isto é, Modelos
ocultos de Markov para \emph{unit selection}. Há, inclusive, uma voz brasileira
feita a partir de HMMs: \cite{couto}.
Projetos mais recentes como \cite{merlin,dnngoogle} utilizam redes neurais para
estimação de parâmetros. O trabalho da Google informa? que a estimação da curva
F0 é uma possível melhoria.

% Resultados realistas, mas não há como controlar parâmetros: \cite{merlin}

\section{Sistemas TTS}
\subsection{MaryTTS}
Projeto FalaBrasil \cite{falabrasil}, \cite{couto}
% \subsubsection{Grafema-fone}
% Para o português brasileiro, foram encontrados os conversores
% da USP: \cite{g2pusp} do projeto falabrasil: \cite{falabrasil}.
\subsection{LianeTTS}
Projeto da SERPRO LianeTTS. Utiliza MBROLA como \emph{back end}. A geração de
prosódia é simples, baseada em tabela.
\subsection{espeak}
Projeto do Dunn. Síntese por formantes (com consoantes gravadas). É possível
obter apenas até a parte de g2p como saída.
\subsection{Festival}
Edinburgo. Multilingual, mas não pro português. Modular: permite configuração
independente de subsistemas como regras letra-som, POS tagging, entonação.
Suporte a múltiplos sintetizadores de fala. HTS, Unit selection, MBROLA.

\subsubsection{MBROLA}
Baseado em síntese por dífonos. Antigo mas qualidade decente. Três vozes para o
português brasileiro. \cite{mbrola} % \cite{mbrola} The ultimate goal is to boost up academic research on speech synthesis, and particularly on prosody generation, known as one of the biggest challenges taken up by Text-to-Speech synthesizers for the years to come.

Baseado no algoritmo {MBRPSOLA} \cite{mbrpsola}. É um \emph{back-end}. O programa recebe uma lista de fones. Um exemplo de entrada é:

\begin{lstlisting}
      _ 150 50 150
      o 108 50 125
      l 125 50 75
      a 116 20 232 80 300
      _ 150 50 150
\end{lstlisting}

\subsubsection{Formato}
Em cada linha, tem-se um fone ou um silêncio representado pelo \emph{underscore} seguido por uma duração em milissegundos e, por último, um ou mais pares de porcentagem e frequência em Hertz determinando alvos para a curva F0. Como exemplo, na quarta linha temos o fone \/a\/ com duração de 116 ms e dois alvos para altura, 232 Hz em 20\% e 300 Hz em 80\%.

% referência?
Cada voz gravada provê uma tabela com os fones que podem ser utilizados. Utilizamos neste trabalho a voz br3 desenvolvida por Denis R. Costa disponível no site oficial do projeto MBROLA.


\subsection{Prosódia em sistemas TTS}
\subsubsection{SSML}
SSML foi criado para padronizar anotações em sintetizadores de fala, permitindo
desambiguação de pronúncia, mudança de linguagem, etc. Phrasing, emphasis, pronunciation. É baseado em XML.
\cite{ssml}, A especificação é mantida pela W3C.
% https://www.w3.org/TR/emotionml/
MaryTTS usa ToBI, MBROLA, Unit selection do FreeTTS, SSML.
Alexa, Google Assistant e Cortana têm suporte a SSML.
SSML é apenas um modificador (insuficiente para estimar prosódia?)
Anotações em SSML são úteis para estender o texto original e dar dicas para
sintetizadores de fala.
% http://mary.dfki.de/documentation/overview.html
\subsubsection{EmotionML}
EmotionML \cite{emotionml} foi criada para várias coisas, uma delas é ajudar
algoritmos a determinarem prosódia. \cite{emotionmary} descreve um
\emph{framework} para implementação de determinação de prosódia a partir de
anotações em emotionml.

\subsection{Modelos de prosódia}
\subsubsection{Teoria métrica-autossegmental}
Pierrehumbert, Moraes (pitch analysis by synthesis). ref Moraes, Intonation Systems (20 languages).
\subsubsection{DaTo}
% Enquanto a teoria MA, representada pelo sistema ToBI, se baseia em aspectos 
% lineares da estrutura tonal, na identifi cação dos 
% pitch accents
%  e no alinhamento abs-
% trato dessa estrutura com o material linguístico, o sistema DaTo de notação entoa-
% cional (LUCENTE, 2008; 2012) se concentra na convergência de aspectos fonéticos 
% – velocidade, intensidade, altura, duração – da curva entoacional a fi m de atingir um 
% alvo ou desempenhar uma tarefa linguística por meio dos contornos entoacionais, da 
% gama de variação tonal e do alinhamento específi co com o material linguístico

% O sistema DaTo foi desenvolvido com base na entoação do português bra-
% sileiro (PB) e trabalha com o conceito de contorno dinâmico, que é defi nido em 
% Lucente (2012, p. 99) como “uma unidade tonal que contém elementos comuni-
% cativos expressos em uma trajetória ideal da curva entoacional, especifi cada por 
% um alvo a ser atingido e associada a uma unidade segmental linguística”
\subsubsection{IPO}
% página 32
\cite{ipo} analisa a prosódia para o português brasileiro através do modelo IPO,
seguindo crítica de Lucente que o sistema ToBI é inapropriado.
 % "esse sistema de notação não abarca certas características fonéticas das curvas de F0 que perceptivamente são relevantes para o reconhecimento desses contornos"
\subsubsection{INTSINT}
INTSINT é um sistema de anotação para prosódia.
% The AM model is phonological, the INTSINT model phonetic and the Fujisaki and Tilt models acoustic''
\subsubsection{Prosódia no português brasileiro}
Trabalhos de Moraes, Tenani, ...