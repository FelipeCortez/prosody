% Capítulo 3 - Referencial ou embasamento teórico
% Revisão da literatura
% texto no qual se deve apresentar os aspectos teóricos, isto é, os conceitos utilizados e a definição dos mesmos; nesta parte faz-se a revisão de literatura sobre o assunto, resumindo-se os resultados de estudos feitos por outros autores, cujas obras citadas e consultadas devem constar nas referências;

% \simb[\% (fronteira de enunciado para ToBI)]
\abrv[INTSINT -- \emph{International Transcription System for Intonation}]
\abrv[HMM -- \emph{Hidden Markov Model}]
\abrv[SSML -- \emph{Speech Synthesis Markup Language}]
\abrv[XML -- \emph{eXtensible Markup Language}]
\abrv[W3C -- \emph{World Wide Web Consortium}]

\chapter{Revisão da literatura}

% Resultados realistas, mas não há como controlar parâmetros: \cite{merlin}

\section{Sistemas TTS para o português brasileiro}
Destacamos aqui sistemas TTS desenvolvidos por ordem cronológica a fim de
evidenciar a evolução das tecnologias utilizadas e as tendências para trabalhos futuros.
\paragraph{Aiuruetê \cite{aiuruete}}
Usa PSOLA pra recodar unidades armazenadas (ortofones)

\paragraph{\cite{couto}}
Apesar de não ter sido oficialmente integrado à ferramenta, foi desenvolvido com
base no \emph{framework} MaryTTS um sistema completo para português brasileiro
baseado em HMMs.
O projeto também acarretou no desenvolvimento do programa de conversão
grafema-fone LaPS-G2P \cite{g2pusp}.
% Para o português brasileiro, foram encontrados os conversores
% da USP: \cite{g2pusp} do projeto falabrasil: \cite{falabrasil}.
\paragraph{LianeTTS \cite{lianetts}}
Projeto da SERPRO LianeTTS. Utiliza MBROLA como \emph{back end}. A geração de
prosódia é simples, baseada em tabela.
\paragraph{espeak \cite{espeakng}}
Projeto do Dunn. Síntese por formantes (com consoantes gravadas) ou por MBROLA. É possível
obter apenas até a parte de g2p como saída.
\paragraph{Microsoft \cite{hmmmicrosoft}}
Baseado em HMM. A stochastic-based LTS (Letter-to-Sound) converter to predict phonetic transcriptions for out-of-vocabulary words and the prosody models, which are data- driven using a prosody tagged corpus of 2000 sentences.
% hese  assumptions  form  the  basis  of  a  two-stage model  of  segmental  duration  assignment.  In  the  first stage,  a  neural  network  automatically  generates  z-score values  characterizing  syllable  and  IPCG  lengthening  (or shortening)  from  a  rich  prosodic  phonetic  description  at the input. This input is constituted by the ortofon output enriched  by  additional  information  as  the  number  of vowels  in  the  sentence,  the  clitic  words  and  the  phrasal stresses,     whose     placement     follows     eurhythmic constraints.  In  the  next  stage,  a  statistical  procedure shares   the   syllable-size   duration   amount   among   the segments,  based  on  their  respective  statistical  mean  and standard-deviation    durations    [4].    These    segmental durations   are   used   by   both   synthesis   techniques   to generate sound
\paragraph{LINSE-DNN \cite{dnnpt}}
Descreve melhorias para o \emph{back-end} baseado em redes neurais profundas.

\paragraph{MBROLA}
\label{sec:mbrola}
MBROLA é uma ferramenta para geração de voz baseada em síntese por dífonos
desenvolvida com o objetivo de fomentar pesquisas acadêmicas em geração de
prosódia \cite{mbrola}. É utilizada como \emph{back-end} para diversos sistemas
TTS, como MaryTTS, e possui três vozes disponíveis para o português brasileiro. % \cite{mbrola} The ultimate goal is to boost up academic research on speech synthesis, and particularly on prosody generation, known as one of the biggest challenges taken up by Text-to-Speech synthesizers for the years to come.

\begin{lstlisting}[caption=Exemplo de arquivo de entrada para MBROLA]
      _ 150 50 150
      t  70 50 125
      e 125 50 75
      c  70 50 125
      e 125 50 75
      c  70 50 125
      e 116 20 232 80 300
      _ 150 50 150
\end{lstlisting}

\subsubsection{Formato}
Em cada linha, tem-se um fone ou um silêncio representado pelo \emph{underscore} seguido por uma duração em milissegundos e, por último, um ou mais pares de porcentagem e frequência em Hertz determinando alvos para a curva F0. Como exemplo, na penúltima linha temos o fone \/e\/ com duração de 116 ms e dois alvos para altura, 232 Hz em 20\% e 300 Hz em 80\%.

Cada voz gravada provê uma tabela com os fones que podem ser utilizados. Utilizamos neste trabalho a voz br3 desenvolvida por Denis R. Costa disponível no site oficial do projeto MBROLA.
% referência?

\subsection{Prosódia em sistemas TTS}
\subsubsection{SSML}
A linguagem de marcação \emph{Speech Synthesis Markup Language} foi criada
motivada pela dificuldade de predição computacional de pronúncia
\cite{ssmlpaper}. Quando originalmente proposta, diferentes sistemas TTS
permitiam anotações extra-textuais para auxiliar a estimação de parâmetros, mas
usuários tinham que aprender um sistema de anotação para cada programa
diferente. A proposta da SSML é que os sistemas TTS recebam o texto anotado numa
linguagem unificada. A linguagem foi adotada por soluções \emph{open-source}
como MaryTTS e espeak-ng, além dos sistemas proprietários encontrados em Alexa,
Google Assistant e Cortana. A especificação é mantida pela W3C \cite{ssml}.
A especificação cita os elementos \emph{emphasis}, \emph{break} e \emph{prosody}
como marcadores que podem auxiliar o processador de linguagem natural a gerar
parâmetros prosódicos apropriados.

\begin{lstlisting}[caption=Exemplo de texto anotado com SSML]
<speak>
    Siga
    <emphasis level="strong">aquele</emphasis> 
    carro.
</speak> 
\end{lstlisting}

% http://mary.dfki.de/documentation/overview.html
% https://www.w3.org/TR/emotionml/
\subsubsection{EmotionML}
EmotionML \cite{emotionml} foi criada para várias coisas, uma delas é ajudar
algoritmos a determinarem prosódia. \cite{emotionmary} descreve um
\emph{framework} para implementação de determinação de prosódia a partir de
anotações em emotionml.

\subsection{Modelos de prosódia}
\subsubsection{Teoria métrica-autossegmental}
% Enquanto a teoria MA, representada pelo sistema ToBI, se baseia em aspectos 
% lineares da estrutura tonal, na identifi cação dos 
% pitch accents
%  e no alinhamento abs-
% trato dessa estrutura com o material linguístico, o sistema DaTo de notação entoa-
% cional (LUCENTE, 2008; 2012) se concentra na convergência de aspectos fonéticos 
% – velocidade, intensidade, altura, duração – da curva entoacional a fi m de atingir um 
% alvo ou desempenhar uma tarefa linguística por meio dos contornos entoacionais, da 
% gama de variação tonal e do alinhamento específi co com o material linguístico

% O sistema DaTo foi desenvolvido com base na entoação do português bra-
% sileiro (PB) e trabalha com o conceito de contorno dinâmico, que é defi nido em 
% Lucente (2012, p. 99) como “uma unidade tonal que contém elementos comuni-
% cativos expressos em uma trajetória ideal da curva entoacional, especifi cada por 
% um alvo a ser atingido e associada a uma unidade segmental linguística”
\subsubsection{IPO}
% página 32
Sistema proposto pela Escola Holandesa. Utilizada por \cite{ipo} para analisar a
prosódia no português brasileiro.
\subsubsection{INTSINT}
INTSINT é um sistema de anotação para prosódia.
% The AM model is phonological, the INTSINT model phonetic and the Fujisaki and Tilt models acoustic''
\subsubsection{DaTo (\emph{Dynamic Tones})}
Apesar de o modelo ToBI para anotação entoacional ter sido utilizado para analisar o
português brasileiro em diversos trabalhos, \citeonline{lucentetobi} argumenta que
há características perceptíveis que a notação não consegue expressar, propondo o
modelo DaTo com base na entonação do português brasileiro.